<!DOCTYPE html><html lang="pt-BR"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>Calculadora de Parametrização de Disjuntor</title>    <script src="https://cdn.tailwindcss.com"></script>    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>    <link rel="preconnect" href="https://fonts.googleapis.com">    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">    <!-- Chosen Palette: Areia e Ardósia -->    <!-- Application Structure Plan: A aplicação é estruturada em três seções verticais para um fluxo de trabalho lógico: 1) Entrada de Dados no topo, 2) Resultados (parâmetros e gráfico) no centro, e 3) Teoria na base. Esta arquitetura guia o utilizador da inserção de dados à visualização dos resultados e, finalmente, ao aprofundamento teórico. O uso de um layout de duas colunas para os resultados (cartões de um lado, gráfico do outro) permite uma comparação visual imediata entre os valores numéricos e seu comportamento gráfico, que é o objetivo principal da ferramenta. A teoria é organizada em um acordeão para manter a interface limpa e acessível sob demanda. -->    <!-- Visualization & Content Choices:         - Formulário de Entrada -> Seção de Inputs: Objetivo: Coletar dados. Método: Formulário HTML/Tailwind. Interação: Campos de texto numérico. Justificação: Método padrão e intuitivo para a inserção de dados pelo utilizador.        - Resultados Numéricos -> Cartões de Destaque: Objetivo: Informar. Método: HTML/Tailwind. Interação: Estática (atualizada via JS). Justificação: Apresenta os resultados finais de forma clara, segmentada por tipo de proteção.        - Curvas de Proteção -> Gráfico de Linhas (Chart.js): Objetivo: Analisar/Comparar. Método: Gráfico log-log em Canvas. Interação: Tooltips. Justificação: Ferramenta visual essencial para engenharia de proteção, mostrando a coordenação entre as curvas e as correntes de operação (nominal e partida). Confirma ausência de SVG/Mermaid.        - Teoria e Fórmulas -> Acordeão Interativo: Objetivo: Detalhar/Educar. Método: HTML/Tailwind com JS para expandir/recolher. Interação: Clique. Justificação: Oferece acesso ao conteúdo teórico aprofundado sem sobrecarregar a interface principal.    -->    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->    <style>        :root {            --bg-main: #f5f5f4; /* Stone 100 */            --bg-card: #ffffff;            --text-primary: #1c1917; /* Stone 900 */            --text-secondary: #57534e; /* Stone 600 */            --border-color: #e7e5e4; /* Stone 200 */            --accent-color: #0d9488; /* Teal 600 */            --accent-hover: #0f766e; /* Teal 700 */            --curve-l: #f97316;            --curve-s: #3b82f6;            --curve-i: #ef4444;            --curve-g: #22c55e;        }        body {            font-family: 'Inter', sans-serif;            background-color: var(--bg-main);            color: var(--text-primary);        }        .chart-container {            position: relative;            width: 100%;            height: 60vh;            max-height: 550px;        }        @media (max-width: 1024px) {            .chart-container {                height: 50vh;                margin-top: 1.5rem;            }        }        .accordion-content {            max-height: 0;            overflow: hidden;            transition: max-height 0.4s ease-in-out;        }        .input-group label {            display: block;            color: var(--text-secondary);            margin-bottom: 0.5rem;            font-size: 0.875rem;        }        .input-group input {            width: 100%;            padding: 0.5rem 0.75rem;            border: 1px solid var(--border-color);            border-radius: 0.5rem;            background-color: #f9fafb;            transition: border-color 0.2s;        }        .input-group input:focus {            outline: none;            border-color: var(--accent-color);            box-shadow: 0 0 0 2px rgba(13, 148, 136, 0.2);        }        .calc-button {            background-color: var(--accent-color);            color: white;            padding: 0.75rem 1.5rem;            border-radius: 0.5rem;            font-weight: 600;            width: 100%;            transition: background-color 0.2s;        }        .calc-button:hover {            background-color: var(--accent-hover);        }    </style></head><body class="antialiased">    <div class="container mx-auto p-4 sm:p-6 lg:p-8">        <header class="text-center mb-8">            <h1 class="text-3xl lg:text-4xl font-bold text-gray-800">Calculadora de Parametrização de Disjuntor</h1>            <p class="text-lg text-gray-600 mt-2">Ferramenta para cálculo de proteções L, S, I e G</p>        </header>        <main>            <!-- Seção de Inputs -->            <section id="input-section" class="bg-white p-6 rounded-lg shadow-md border border-gray-200 mb-8">                <h2 class="text-2xl font-semibold mb-4">1. Inserir Dados da Instalação</h2>                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">                    <div class="input-group">                        <label for="motorCount">Qtde. Motores</label>                        <input type="number" id="motorCount" value="4">                    </div>                    <div class="input-group">                        <label for="breakerIn">In do Disjuntor (A)</label>                        <input type="number" id="breakerIn" value="2000">                    </div>                    <div class="input-group">                        <label for="motorIn">In do Motor (A)</label>                        <input type="number" id="motorIn" value="439">                    </div>                    <div class="input-group">                        <label for="ipInRatio">Relação Ip/In</label>                        <input type="number" step="0.1" id="ipInRatio" value="4.5">                    </div>                </div>                <div class="mt-6 flex justify-center">                    <div class="w-full md:w-1/3">                        <button id="calculateBtn" class="calc-button">Calcular Parâmetros</button>                    </div>                </div>            </section>            <!-- Seção de Resultados -->            <section id="results-section" class="bg-white p-6 rounded-lg shadow-md border border-gray-200 mb-8" style="display: none;">                <h2 class="text-2xl font-semibold mb-6">2. Resultados da Parametrização</h2>                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-start">                    <div class="space-y-4">                         <div class="p-4 rounded-lg bg-gray-50 border border-gray-200">                            <h3 class="font-semibold text-lg mb-2">Correntes de Operação Calculadas</h3>                            <div class="space-y-2 text-sm">                                <div class="flex justify-between items-center">                                    <span class="text-gray-600">Corrente Nominal Total (In_total):</span>                                    <span id="inTotal" class="font-bold text-base text-gray-800"></span>                                </div>                                <div class="flex justify-between items-center">                                    <span class="text-gray-600">Corrente Partida Escalonada (Ip_total):</span>                                    <span id="ipTotal" class="font-bold text-base text-gray-800"></span>                                </div>                            </div>                        </div>                        <div class="p-4 rounded-lg bg-gray-50 border border-gray-200">                            <h3 class="font-semibold text-lg mb-3">Parâmetros de Ajuste Sugeridos (WEG ABW)</h3>                            <div class="grid grid-cols-2 gap-4 text-center">                                <div class="p-3 rounded-lg bg-orange-50 border border-orange-200">                                    <div class="font-bold text-orange-600">Proteção L</div>                                    <div id="resultL" class="text-sm mt-1 font-semibold text-lg text-gray-800"></div>                                </div>                                <div class="p-3 rounded-lg bg-blue-50 border border-blue-200">                                    <div class="font-bold text-blue-600">Proteção S</div>                                    <div id="resultS" class="text-sm mt-1 font-semibold text-lg text-gray-800"></div>                                </div>                                <div class="p-3 rounded-lg bg-red-50 border border-red-200">                                    <div class="font-bold text-red-600">Proteção I</div>                                    <div id="resultI" class="text-sm mt-1 font-semibold text-lg text-gray-800"></div>                                </div>                                <div class="p-3 rounded-lg bg-green-50 border border-green-200">                                    <div class="font-bold text-green-600">Proteção G</div>                                    <div id="resultG" class="text-sm mt-1 font-semibold text-lg text-gray-800"></div>                                </div>                            </div>                        </div>                    </div>                                        <div class="chart-container">                        <canvas id="protectionChart"></canvas>                    </div>                </div>            </section>            <!-- Seção de Teoria -->            <section class="bg-white p-6 rounded-lg shadow-md border border-gray-200">                <h2 class="text-2xl font-semibold mb-4">3. Teoria e Fórmulas Aplicadas</h2>                <div class="space-y-2" id="accordion">                    <div class="accordion-item border-t border-gray-200">                        <button class="accordion-header w-full text-left py-4 px-2 flex justify-between items-center transition-colors duration-200 hover:bg-gray-50">                            <span class="font-semibold text-lg">Proteção L: Sobrecarga (Longa Duração)</span>                            <svg class="w-5 h-5 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>                        </button>                        <div class="accordion-content px-2 pb-4">                            <div class="prose max-w-none text-gray-700">                                <p>Protege os cabos contra sobreaquecimento por sobrecargas prolongadas. O ajuste de corrente `Ir` deve ser ligeiramente superior à corrente nominal total da carga para permitir flutuações normais.</p>                                <p><strong>Fórmula:</strong> `Ir (alvo) = 1.15 * In_total`</p>                                <p>O tempo `tr` define a lentidão da curva e é escolhido para coordenar com a capacidade térmica dos cabos, sendo comum 9 a 12 segundos (a 6xIr) para motores.</p>                            </div>                        </div>                    </div>                     <div class="accordion-item border-t border-gray-200">                        <button class="accordion-header w-full text-left py-4 px-2 flex justify-between items-center transition-colors duration-200 hover:bg-gray-50">                            <span class="font-semibold text-lg">Proteção S: Seletiva (Curta Duração)</span>                            <svg class="w-5 h-5 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>                        </button>                        <div class="accordion-content px-2 pb-4">                             <div class="prose max-w-none text-gray-700">                                <p>Atua em sobrecorrentes de média intensidade, como a partida de motores. O ajuste de corrente `Isd` deve ser maior que a corrente total de partida (`Ip_total`) para evitar desarmes. O tempo `tsd` permite que a corrente de partida se estabilize.</p>                                <p><strong>Fórmula:</strong> `Isd (alvo) > Ip_total`</p>                            </div>                        </div>                    </div>                     <div class="accordion-item border-t border-gray-200">                        <button class="accordion-header w-full text-left py-4 px-2 flex justify-between items-center transition-colors duration-200 hover:bg-gray-50">                            <span class="font-semibold text-lg">Proteção I: Instantânea</span>                             <svg class="w-5 h-5 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>                        </button>                        <div class="accordion-content px-2 pb-4">                            <div class="prose max-w-none text-gray-700">                                <p>Atua instantaneamente para correntes de curto-circuito elevadas. O ajuste `Ii` deve ser maior que o pico da corrente de partida *assimétrica* (que inclui uma componente DC transitória) para evitar atuação na partida do motor.</p>                                <p><strong>Fórmula:</strong> `Ii (alvo) > 1.5 * √2 * Ip_total`</p>                            </div>                        </div>                    </div>                     <div class="accordion-item border-t border-gray-200">                        <button class="accordion-header w-full text-left py-4 px-2 flex justify-between items-center transition-colors duration-200 hover:bg-gray-50">                            <span class="font-semibold text-lg">Proteção G: Falta à Terra</span>                             <svg class="w-5 h-5 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>                        </button>                        <div class="accordion-content px-2 pb-4">                            <div class="prose max-w-none text-gray-700">                                <p>Detecta correntes de fuga para a terra, que são perigosas mas muitas vezes pequenas demais para serem detectadas pelas outras proteções. O ajuste `Ig` é uma fração da corrente nominal do disjuntor para garantir sensibilidade sem causar desarmes por fugas normais de operação.</p>                                <p><strong>Fórmula:</strong> `Ig (alvo) = (0.2 a 0.4) * In (disjuntor)`</p>                            </div>                        </div>                    </div>                </div>            </section>        </main>    </div>    <script>        document.addEventListener('DOMContentLoaded', () => {            const calculateBtn = document.getElementById('calculateBtn');            const resultsSection = document.getElementById('results-section');            const accordionItems = document.querySelectorAll('.accordion-item');            const wegSettings = {                ir_multipliers: [0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0],                tr_options: [0.5, 1, 2, 4, 8, 12, 16, 20],                isd_multipliers: [1.5, 2, 3, 4, 5, 6, 8, 10],                tsd_options: [0.05, 0.1, 0.2, 0.3, 0.4],                ii_multipliers: [2, 3, 4, 6, 8, 10, 12, 15],                ig_multipliers: [0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 1.0],                tg_options: [0.05, 0.1, 0.2, 0.3, 0.4]            };            let protectionChart = null;            const initChart = () => {                const ctx = document.getElementById('protectionChart').getContext('2d');                protectionChart = new Chart(ctx, {                    type: 'line',                    data: { datasets: [] },                    options: {                        responsive: true,                        maintainAspectRatio: false,                        scales: {                            x: {                                type: 'logarithmic',                                title: { display: true, text: 'Corrente (A)' },                                min: 100,                                max: 100000,                                ticks: {                                    callback: function(value, index, values) {                                        if (value === 100 || value === 1000 || value === 10000 || value === 100000) {                                            return value.toString();                                        }                                    }                                }                            },                            y: {                                type: 'logarithmic',                                title: { display: true, text: 'Tempo (s)' },                                min: 0.01,                                max: 1000,                                ticks: {                                    callback: function(value, index, values) {                                        if (value === 0.01 || value === 0.1 || value === 1 || value === 10 || value === 100 || value === 1000) {                                            return value.toString();                                        }                                    }                                }                            }                        },                        plugins: {                            tooltip: {                                mode: 'index',                                intersect: false,                                callbacks: {                                    label: function(context) {                                        let label = context.dataset.label || '';                                        if (label) { label += ': '; }                                        if (context.parsed.y !== null) {                                            label += `${context.parsed.x.toFixed(0)} A, ${context.parsed.y.toFixed(3)} s`;                                        }                                        return label;                                    }                                }                            },                            legend: {                                position: 'bottom',                            }                        }                    }                });            };            const generateLData = (Ir, tr) => {                const data = [];                const baseTimeAt6xIr = tr;                 const k = baseTimeAt6xIr * (6*6 - 1);                                for (let i = Ir * 1.05; i <= 100000; i += (i < 10000 ? 50 : 500)) {                    const multiplier = i / Ir;                    if (multiplier > 1.05) {                        const time = k / ((multiplier * multiplier) - 1);                        if(time > 0.01) data.push({ x: i, y: time });                    }                }                return data;            };            const updateChart = (opCurrents, settings) => {                protectionChart.data.datasets = [                    {                        label: 'Proteção L',                        data: generateLData(settings.L.Ir, settings.L.tr),                        borderColor: 'var(--curve-l)',                        borderWidth: 2.5,                        pointRadius: 0,                        tension: 0.1                    },                    {                        label: 'Proteção S',                        data: [                            {x: settings.S.Isd, y: 1000}, {x: settings.S.Isd, y: settings.S.tsd},                            {x: 100000, y: settings.S.tsd},                        ],                        borderColor: 'var(--curve-s)',                        borderWidth: 2.5,                        pointRadius: 0,                        stepped: 'before',                    },                    {                        label: 'Proteção I',                        data: [                            {x: settings.I.Ii, y: 1000}, {x: settings.I.Ii, y: 0.02},                            {x: 100000, y: 0.02},                        ],                        borderColor: 'var(--curve-i)',                        borderWidth: 2.5,                        pointRadius: 0,                        stepped: 'before',                    },                     {                        label: 'Proteção G',                        data: [                            {x: settings.G.Ig, y: 1000}, {x: settings.G.Ig, y: settings.G.tg},                            {x: 100000, y: settings.G.tg},                        ],                        borderColor: 'var(--curve-g)',                        borderWidth: 2.5,                        pointRadius: 0,                        stepped: 'before',                    },                    {                        label: 'In_total',                        data: [{x: opCurrents.inTotal, y: 0.01}, {x: opCurrents.inTotal, y: 1000}],                        borderColor: 'var(--accent-color)',                        borderDash: [6, 6],                        borderWidth: 2,                        pointRadius: 0,                    },                    {                        label: 'Ip_total',                        data: [{x: opCurrents.ipTotal, y: 0.01}, {x: opCurrents.ipTotal, y: 1000}],                        borderColor: '#78716c',                        borderDash: [6, 6],                        borderWidth: 2,                        pointRadius: 0,                    }                ];                protectionChart.update();            };            const findClosestGreater = (arr, target) => {                return arr.find(val => val >= target) || arr[arr.length - 1];            };                        calculateBtn.addEventListener('click', () => {                const motorCount = parseFloat(document.getElementById('motorCount').value);                const breakerIn = parseFloat(document.getElementById('breakerIn').value);                const motorIn = parseFloat(document.getElementById('motorIn').value);                const ipInRatio = parseFloat(document.getElementById('ipInRatio').value);                if ([motorCount, breakerIn, motorIn, ipInRatio].some(isNaN)) {                    alert('Por favor, preencha todos os campos com valores numéricos.');                    return;                }                const inTotal = motorCount * motorIn;                const ipMotor = ipInRatio * motorIn;                const ipTotal = (motorCount - 1) * motorIn + ipMotor;                document.getElementById('inTotal').textContent = `${inTotal.toFixed(1)} A`;                document.getElementById('ipTotal').textContent = `${ipTotal.toFixed(1)} A`;                const finalSettings = {};                const irTarget = 1.15 * inTotal;                const irMultiplier = findClosestGreater(wegSettings.ir_multipliers, irTarget / breakerIn);                finalSettings.L = { Ir: irMultiplier * breakerIn, tr: 12 };                const isdTargetMultiplier = ipTotal / finalSettings.L.Ir;                const isdMultiplier = findClosestGreater(wegSettings.isd_multipliers, isdTargetMultiplier);                finalSettings.S = { Isd: isdMultiplier * finalSettings.L.Ir, tsd: 0.2 };                const iiTarget = 1.5 * Math.sqrt(2) * ipTotal;                const iiTargetMultiplier = iiTarget / breakerIn;                const iiMultiplier = findClosestGreater(wegSettings.ii_multipliers, iiTargetMultiplier);                finalSettings.I = { Ii: iiMultiplier * breakerIn };                                const igTargetMultiplier = 0.3;                const igMultiplier = findClosestGreater(wegSettings.ig_multipliers, igTargetMultiplier);                finalSettings.G = { Ig: igMultiplier * breakerIn, tg: 0.2 };                document.getElementById('resultL').innerHTML = `Ir = ${finalSettings.L.Ir} A <br> tr = ${finalSettings.L.tr} s`;                document.getElementById('resultS').innerHTML = `Isd = ${finalSettings.S.Isd} A <br> tsd = ${finalSettings.S.tsd} s`;                document.getElementById('resultI').innerHTML = `Ii = ${finalSettings.I.Ii} A`;                document.getElementById('resultG').innerHTML = `Ig = ${finalSettings.G.Ig} A <br> tg = ${finalSettings.G.tg} s`;                                resultsSection.style.display = 'block';                if (!protectionChart) {                    initChart();                }                updateChart({ inTotal, ipTotal }, finalSettings);            });                        accordionItems.forEach(item => {                const header = item.querySelector('.accordion-header');                const content = item.querySelector('.accordion-content');                const icon = header.querySelector('svg');                header.addEventListener('click', () => {                    const isOpen = content.style.maxHeight && content.style.maxHeight !== '0px';                    if (!isOpen) {                        content.style.maxHeight = content.scrollHeight + 'px';                        icon.style.transform = 'rotate(180deg)';                    } else {                        content.style.maxHeight = '0px';                        icon.style.transform = 'rotate(0deg)';                    }                });            });            calculateBtn.click();        });    </script></body></html>